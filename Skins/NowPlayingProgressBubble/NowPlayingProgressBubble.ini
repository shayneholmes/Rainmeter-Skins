[Rainmeter]
Update=50

[Metadata]
Name=NowPlaying Progress - Bubble
Author=Shayne Holmes 
Information=Shows current progress by shading a hollow circle from side to side at various angles
Version=1.0
License=Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License

[Variables]
Player=CAD
CircleRadius=50
CircleWidth=13
ProgressColor=077d9bff
BackgroundColor=056077ff

[MeasureRandomAngle]
Measure=Calc
Formula=Random
UpdateDivider=-1
Group=UpdateOnTrackChange

[MeasureDuration]
Measure=Plugin
Plugin=NowPlaying.dll
PlayerName=#player#
PlayerType=DURATION
TrackChangeAction=[!UpdateMeasureGroup UpdateOnTrackChange][!CommandMeasure MeasureProgressInterpolated "GetTrackDuration()"]

[MeasurePosition]
Measure=Plugin
Plugin=NowPlaying.dll
PlayerName=[MeasureDuration]
PlayerType=POSITION

[MeasureStateButton]
Measure=Plugin
Plugin=NowPlaying.dll
PlayerName=[MeasureDuration]
PlayerType=STATE

[MeasureProgressInterpolated]
Measure=Script
ScriptFile=#@#scripts/SmoothProgress.lua

[MeterProgressCircle]
Meter=Shape
Shape =Ellipse #CircleRadius#,#CircleRadius#,#CircleRadius#,#CircleRadius# | FillColor #BackgroundColor# | StrokeWidth 0
Shape2=Ellipse #CircleRadius#,#CircleRadius#,(#CircleRadius#-#CircleWidth#),(#CircleRadius#-#CircleWidth#)
Shape3=Combine Shape | Exclude Shape2
Shape4=Rectangle 0,0,(#CircleRadius#*2),(#CircleRadius#*2) | FillColor #ProgressColor# | StrokeWidth 0 | Extend ProgresBar
ProgresBar=Scale ([MeasureProgressInterpolated]), 1, 0, 0 | Rotate ([MeasureRandomAngle]*360/100), (#CircleRadius#), (#CircleRadius#) | TransformOrder Scale, Rotate
Shape5=Combine Shape4 | Intersect Shape | Exclude Shape2
DynamicVariables=1
